export type LanguageCode = "ja" | "en";

export type MessageKey = keyof typeof messages.ja;

const messages = {
  ja: {
    appName: "Architecture Diagram Maker",
    tagline: "アーキテクチャ図を素早くスケッチして保存する",
    navHome: "ホーム",
    navEditor: "エディター",
    navItems: "アイコン",
    navHistory: "編集履歴",
    navSettings: "設定",
    navAbout: "このアプリについて",
    heroTitle: "アーキテクチャダイアグラムを簡単に作成",
    heroBody:
      "アイコンパレットから配置し、ボックスやテキスト、矢印で構成した後にJSONとして保存できます。",
    heroAction: "エディターを開く",
    editorTitle: "エディタビュー",
    editorSubtitle:
      "キャンバスをドラッグして要素を配置し、保存・エクスポートできます。",
    diagramNameLabel: "アーキテクチャ図名",
    diagramNamePlaceholder: "例: サービス構成図",
    diagramIdPrefixLabel: "ID プレフィックス",
    diagramIdPrefixPlaceholder: "例: arch",
    panelPaletteTitle: "アイコンパレット",
    panelPaletteSearch: "アイコン検索",
    panelToolsTitle: "作図ツール",
    panelPropertiesTitle: "プロパティ",
    panelLayersTitle: "レイヤー",
    panelStorageTitle: "保存済みデータ",
    panelStorageHint:
      "JSON 形式で保存します。Cosmos DB を設定している場合はクラウドにも保存します。",
    storageMenuButton: "データ保存/復元",
    modalClose: "閉じる",
    toolMoveResize: "移動/リサイズ",
    toolBox: "ボックス",
    toolBoxDashed: "ボックス - 点線",
    toolText: "テキスト",
    toolLineSolid: "実線",
    toolLineDashed: "点線",
    toolArrowSolidSingle: "実線-片矢印",
    toolArrowDashedSingle: "点線-片矢印",
    toolArrowSolidDouble: "実線-両矢印",
    toolArrowDashedDouble: "点線-両矢印",
    toolLineSolidElbow: "実線-かぎ線",
    toolLineDashedElbow: "点線-かぎ線",
    toolArrowSolidSingleElbow: "実線-片矢印(かぎ線)",
    toolArrowDashedSingleElbow: "点線-片矢印(かぎ線)",
    toolArrowSolidDoubleElbow: "実線-両矢印(かぎ線)",
    toolArrowDashedDoubleElbow: "点線-両矢印(かぎ線)",
    toolClear: "全削除",
    toolExportMenu: "エクスポート",
    toolExport: "PNG",
    toolExportJson: "JSON",
    toolSave: "保存",
    toolLoad: "読み込み",
    toolCanvasMenu: "キャンバス操作",
    toolBringFront: "最前面",
    toolSendBack: "最背面",
    toolDuplicate: "複製",
    toolDelete: "削除",
    toolGroup: "グループ化",
    toolUngroup: "グループ解除",
    toolGridToggle: "グリッド表示",
    contextLineStyle: "線種",
    contextBoxBorderStyle: "枠線スタイル",
    contextBoxBorderSolid: "実線",
    contextBoxBorderDashed: "点線",
    contextBoxFillTransparent: "塗りを透明にする",
    contextBoxBorderTransparent: "枠線を透明にする",
    contextArrowEnds: "矢印",
    contextArrowStart: "始点",
    contextArrowEnd: "終点",
    propertyFill: "塗り",
    propertyBorder: "枠線",
    propertyText: "テキスト",
    propertySize: "サイズ",
    propertyWidth: "幅",
    propertyHeight: "高さ",
    propertyOpacity: "透明度",
    propertyStroke: "線色",
    propertyStrokeWidth: "線幅",
    propertyFontSize: "文字サイズ",
    propertyRadius: "角丸",
    propertyArrowStyle: "矢印スタイル",
    propertyStartX: "始点X",
    propertyStartY: "始点Y",
    propertyEndX: "終点X",
    propertyEndY: "終点Y",
    propertyLabelAlign: "ラベル配置",
    alignLeft: "左寄せ",
    alignCenter: "中央",
    alignRight: "右寄せ",
    propertyLabelAlignX: "左右位置",
    propertyLabelAlignY: "上下位置",
    alignTop: "上寄せ",
    alignBottom: "下寄せ",
    inspectorTransparent: "透明",
    defaultDiagramName: "下書き",
    defaultBoxLabel: "サービス",
    defaultTextLabel: "テキスト",
    defaultIconLabel: "アイコン",
    sampleName: "Azure API サンプル",
    sampleApiGateway: "API Gateway",
    sampleApiManagement: "API Management",
    sampleLogicApps: "Logic Apps",
    samplePublishInterfaces: "Publish interfaces",
    propertyName: "名称",
    propertyIconAlt: "アイコン",
    propertyUseIcon: "アイコンを使用",
    propertyUseText: "テキストを使用",
    propertyUseBox: "ボックスを使用",
    canvasEmpty: "キャンバスに要素がありません。",
    storageEmpty: "保存済みのデータがありません。",
    settingsTitle: "設定",
    settingsBody:
      "保存先はローカルストレージ、または Cosmos DB を設定している場合はクラウドです。",
    historyLimitTitle: "履歴保存数",
    historyLimitBody:
      "Undo/Redo の履歴をメモリに保持する件数を設定します。",
    historyLimitLabel: "保存件数",
    historyLimitHint:
      "既定は 100 件（NEXT_PUBLIC_HISTORY_LIMIT で上書き可能）。",
    exportScaleTitle: "PNG エクスポート解像度",
    exportScaleBody:
      "PNG 出力の倍率を設定します。高いほど解像度は上がりますが、処理時間も増えます。",
    exportScaleLabel: "倍率",
    exportScaleHint:
      "既定は 4（NEXT_PUBLIC_EXPORT_SCALE で上書き可能、1〜8）。",
    aboutTitle: "アプリ概要",
    aboutBody:
      "アーキテクチャ図を素早く作成するための軽量エディターです。",
    itemsTitle: "アイコンカタログ",
    itemsBody:
      "public/icons 配下のSVG/PNGをパレットに表示します（サンプル icons-sample は任意）。",
    historyTitle: "編集履歴",
    historyBody:
      "作業のスナップショットを時系列で表示し、クリックで当時の状態に戻せます。",
    historyEmpty: "まだ編集履歴がありません。",
    historyError: "履歴の読み込みに失敗しました。",
    historyDiagram: "図面",
    historySavedAt: "保存時刻",
    historyElements: "要素数",
    historyAction: "操作",
    historyRollback: "ロールバック",
    historyRollingBack: "復元中…",
    footerText: "",
    languageLabel: "言語",
    loadSample: "サンプル読み込み",
    storageKeyLabel: "保存キー",
    storageSavedAt: "保存日時",
    storageActionLabel: "操作",
    storageLoad: "読み込み",
    storageOverwrite: "上書き保存",
    storageNew: "新規保存",
    storageDelete: "削除",
    storageImport: "JSON インポート",
    storageImportFile: "JSON ファイルを選択",
    storageExport: "JSON エクスポート",
    storageCopy: "コピー",
    storageCopied: "コピーしました",
    inspectorHint: "要素をクリックして編集してください。",
    multiSelection: "複数の要素が選択されています。",
    paletteHint:
      "public/icons の画像が自動表示されます（サンプルは環境変数で icons-sample を表示可能）。",
    paletteEmpty: "アイコンが見つかりません。",
    imageExportHint: "キャンバスを PNG として保存します。",
    azureHint:
      "Cosmos DB を設定すると、作成した図をクラウドに保存できます。",
    loadExampleHint: "例として簡易な構成を読み込みます。",
    noSelection: "選択中の要素がありません。",
    loginTitle: "ログイン",
    loginSubtitle: "続行するには認証が必要です。",
    loginUserLabel: "ユーザー名",
    loginPassLabel: "パスワード",
    loginAction: "ログイン",
    loginError: "ユーザー名またはパスワードが正しくありません。",
    logoutAction: "ログアウト",
    msalLoginAction: "Microsoft アカウントでサインイン",
    msalLoginSubtitle: "組織の Microsoft アカウントでサインインしてください。",
    msalLoading: "認証情報を確認しています…",
    msalLogoutAction: "サインアウト",
    msalUserLabel: "ログインユーザー",
    msalAccountInfoTitle: "アカウント情報",
    msalAccountDisplayName: "表示名",
    msalAccountEmail: "メールアドレス",
    msalAccountTenantId: "テナント ID",
    msalAccountClose: "閉じる",
  },
  en: {
    appName: "Architecture Diagram Maker",
    tagline: "Sketch architectures quickly and save them",
    navHome: "Home",
    navEditor: "Editor",
    navItems: "Icons",
    navHistory: "History",
    navSettings: "Settings",
    navAbout: "About",
    heroTitle: "Create architecture diagrams quickly",
    heroBody:
      "Place icons, boxes, text, and arrows, then save the diagram as JSON.",
    heroAction: "Open editor",
    editorTitle: "Editor View",
    editorSubtitle:
      "Drag elements onto the canvas and save or export the result.",
    diagramNameLabel: "Diagram name",
    diagramNamePlaceholder: "e.g. Service architecture",
    diagramIdPrefixLabel: "ID prefix",
    diagramIdPrefixPlaceholder: "e.g. arch",
    panelPaletteTitle: "Icon palette",
    panelPaletteSearch: "Search icons",
    panelToolsTitle: "Drawing tools",
    panelPropertiesTitle: "Properties",
    panelLayersTitle: "Layers",
    panelStorageTitle: "Saved data",
    panelStorageHint:
      "Saved as JSON. If Cosmos DB is configured, it also saves to the cloud.",
    storageMenuButton: "Save/Load",
    modalClose: "Close",
    toolMoveResize: "Move/Resize",
    toolBox: "Box",
    toolBoxDashed: "Box - Dashed",
    toolText: "Text",
    toolLineSolid: "Solid line",
    toolLineDashed: "Dashed line",
    toolArrowSolidSingle: "Solid single arrow",
    toolArrowDashedSingle: "Dashed single arrow",
    toolArrowSolidDouble: "Solid double arrow",
    toolArrowDashedDouble: "Dashed double arrow",
    toolLineSolidElbow: "Solid elbow line",
    toolLineDashedElbow: "Dashed elbow line",
    toolArrowSolidSingleElbow: "Solid single elbow arrow",
    toolArrowDashedSingleElbow: "Dashed single elbow arrow",
    toolArrowSolidDoubleElbow: "Solid double elbow arrow",
    toolArrowDashedDoubleElbow: "Dashed double elbow arrow",
    toolClear: "Clear",
    toolExportMenu: "Export",
    toolExport: "PNG",
    toolExportJson: "JSON",
    toolSave: "Save",
    toolLoad: "Load",
    toolCanvasMenu: "Canvas",
    toolBringFront: "Bring front",
    toolSendBack: "Send back",
    toolDuplicate: "Duplicate",
    toolDelete: "Delete",
    toolGroup: "Group",
    toolUngroup: "Ungroup",
    toolGridToggle: "Show grid",
    contextLineStyle: "Line style",
    contextBoxBorderStyle: "Border style",
    contextBoxBorderSolid: "Solid",
    contextBoxBorderDashed: "Dashed",
    contextBoxFillTransparent: "Transparent fill",
    contextBoxBorderTransparent: "Transparent border",
    contextArrowEnds: "Arrowheads",
    contextArrowStart: "Start",
    contextArrowEnd: "End",
    propertyFill: "Fill",
    propertyBorder: "Border",
    propertyText: "Text",
    propertySize: "Size",
    propertyWidth: "Width",
    propertyHeight: "Height",
    propertyOpacity: "Opacity",
    propertyStroke: "Stroke",
    propertyStrokeWidth: "Stroke width",
    propertyFontSize: "Font size",
    propertyRadius: "Corner radius",
    propertyArrowStyle: "Arrow style",
    propertyStartX: "Start X",
    propertyStartY: "Start Y",
    propertyEndX: "End X",
    propertyEndY: "End Y",
    propertyLabelAlign: "Label alignment",
    alignLeft: "Left",
    alignCenter: "Center",
    alignRight: "Right",
    propertyLabelAlignX: "Horizontal align",
    propertyLabelAlignY: "Vertical align",
    alignTop: "Top",
    alignBottom: "Bottom",
    inspectorTransparent: "Clear",
    defaultDiagramName: "Draft",
    defaultBoxLabel: "Service",
    defaultTextLabel: "Text",
    defaultIconLabel: "Icon",
    sampleName: "Azure API sample",
    sampleApiGateway: "API Gateway",
    sampleApiManagement: "API Management",
    sampleLogicApps: "Logic Apps",
    samplePublishInterfaces: "Publish interfaces",
    propertyName: "Name",
    propertyIconAlt: "Icon",
    propertyUseIcon: "Use icon",
    propertyUseText: "Use text",
    propertyUseBox: "Use box",
    canvasEmpty: "No elements on the canvas yet.",
    storageEmpty: "No saved diagrams yet.",
    settingsTitle: "Settings",
    settingsBody:
      "Storage uses local storage, or Cosmos DB when configured.",
    historyLimitTitle: "History limit",
    historyLimitBody:
      "Set how many undo/redo steps are kept in memory.",
    historyLimitLabel: "Steps to keep",
    historyLimitHint:
      "Default is 100 (override with NEXT_PUBLIC_HISTORY_LIMIT).",
    exportScaleTitle: "PNG export resolution",
    exportScaleBody:
      "Set the scale multiplier for PNG export. Higher values increase resolution but take longer.",
    exportScaleLabel: "Scale",
    exportScaleHint:
      "Default is 4 (override with NEXT_PUBLIC_EXPORT_SCALE, 1-8).",
    aboutTitle: "About",
    aboutBody: "A lightweight editor for drafting architecture diagrams.",
    itemsTitle: "Icon catalog",
    itemsBody:
      "SVG/PNG icons under public/icons appear in the palette (optional icons-sample via env).",
    historyTitle: "Edit history",
    historyBody:
      "Review snapshots in reverse chronological order and roll back to a previous state.",
    historyEmpty: "No history entries yet.",
    historyError: "Failed to load history entries.",
    historyDiagram: "Diagram",
    historySavedAt: "Saved at",
    historyElements: "Elements",
    historyAction: "Action",
    historyRollback: "Rollback",
    historyRollingBack: "Rolling back...",
    footerText: "",
    languageLabel: "Language",
    loadSample: "Load sample",
    storageKeyLabel: "Storage key",
    storageSavedAt: "Saved at",
    storageActionLabel: "Actions",
    storageLoad: "Load",
    storageOverwrite: "Overwrite",
    storageNew: "Save new",
    storageDelete: "Delete",
    storageImport: "Import JSON",
    storageImportFile: "Choose a JSON file",
    storageExport: "Export JSON",
    storageCopy: "Copy",
    storageCopied: "Copied",
    inspectorHint: "Select an element to edit it.",
    multiSelection: "Multiple elements selected.",
    paletteHint:
      "Images under public/icons appear automatically (optional icons-sample via env).",
    paletteEmpty: "No icons found.",
    imageExportHint: "Export the canvas as PNG.",
    azureHint: "Configure Cosmos DB to save diagrams to the cloud.",
    loadExampleHint: "Load a simple starter layout.",
    noSelection: "No element selected.",
    loginTitle: "Sign in",
    loginSubtitle: "Authentication is required to continue.",
    loginUserLabel: "Username",
    loginPassLabel: "Password",
    loginAction: "Sign in",
    loginError: "The username or password is incorrect.",
    logoutAction: "Sign out",
    msalLoginAction: "Sign in with Microsoft",
    msalLoginSubtitle: "Sign in with your organization's Microsoft account.",
    msalLoading: "Verifying authentication…",
    msalLogoutAction: "Sign out",
    msalUserLabel: "Signed in as",
    msalAccountInfoTitle: "Account Information",
    msalAccountDisplayName: "Display Name",
    msalAccountEmail: "Email",
    msalAccountTenantId: "Tenant ID",
    msalAccountClose: "Close",
  },
} as const;

export const supportedLanguages: Array<{ code: LanguageCode; label: string }> = [
  { code: "ja", label: "日本語" },
  { code: "en", label: "English" },
];

export const defaultLanguage: LanguageCode = "ja";

export const getMessages = (language: LanguageCode) => {
  return messages[language] ?? messages[defaultLanguage];
};

export const getLanguageFromSearch = (search: string) => {
  const params = new URLSearchParams(search);
  const value = params.get("lang");
  if (value === "ja" || value === "en") {
    return value;
  }
  return defaultLanguage;
};
